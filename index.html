<html>
    <head>
        <title>Clicker Heroes Optimizer</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" type="text/css" href="css/bootstrap-slider.min.css">
        
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/bootstrap-slider.min.js"></script>
        <script src="js/clipboard.min.js"></script>
        <script src="https://cdn.rawgit.com/sytelus/CryptoJS/master/components/core-min.js"></script>
        <script src="https://cdn.rawgit.com/sytelus/CryptoJS/master/components/md5-min.js"></script>
        </head>
    <body>
		<div id="header">
			<a target="_blank" href="http://www.clickerheroes.com">Clicker Heroes</a> |
			<a target="_blank" href="https://www.reddit.com/r/ClickerHeroes/">Reddit</a> | 
			<a target="_blank" href="https://www.facebook.com/Clicker-Heroes-696573203747255/">Facebook</a> | 
			<a target="_blank" href="https://twitter.com/clickerheroes">Twitter</a>
		</div>
	<div style="width:100%">
		<div>
			<ul class="tabs">
				<li><a href="#tab1" class="tablinks" id="link1">Introduction</a></li>
				<li><a href="#tab2" class="tablinks" id="link2">Uploader</a></li>
				<li><a href="#tab3" class="tablinks" id="link3">Calculator</a></li>
				<li><a href="#tab4" class="tablinks" id="link4">Lister</a></li>
			</ul>
			<div id="tab1" class="tabcontent">
			<div class="tablinks">
				<h1 style="text-align:center">INTRODUCTION</h1>
					<p>
					This tool lets you upload your Clicker Heroes save file from Android or Jailbroken iOS and removes the header and footer of the file to make it compatible with a save file encoder which can then be used for <a target="_blank" href="https://www.reddit.com/r/ClickerHeroes/wiki/calculators">calculators</a> as well as displaying your progress from <a target="_blank" href="http://alexbonjour.github.io/clicker-lister/">Clicker Lister</a>. 
					</p>
			</div>
			<div class="tablinks" id="obtainSaveAndroid">
				<h1 id="obtainId">How to obtain your save file (Android)</h1>
			</div>
			<div class="tablinks" id="obtainAndroid">
				<h3>Method 1 (Rooted)</h3>
				<ol>
					<li>Make sure you are using a root file browser such as <a target="_blank" href="https://play.google.com/store/apps/details?id=com.estrongs.android.pop&hl=en">ES File Explorer</a> or <a target="_blank" href="https://play.google.com/store/apps/details?id=com.jrummy.root.browserfree&hl=en">Root Browser</a></li>
					<li>Navigate to /data/&#8203;data/&#8203;air.com.r2gamesusa.clickerheroes/&#8203;com.r2gamesusa.clickerheroes/&#8203;Local Store/#SharedObjects</li>
					<li>Copy ClickerHeroesAccountSO.sol to your sdcard</li>
					<li>Browse for the copied file in the next tab</li>
				</ol>
				<h3>Method 2 (Unrooted)</h3>
				<p>Refer to <a target="_blank" href="https://docs.google.com/document/d/1E_5rw2SF_LP6zrroWvGdPe5ZpBmudp0j5lU8M-Kp7Fg/edit">this guide</a> created by <a target="_blank" href="https://www.reddit.com/user/PlainBillOregon"> u/PlainBillOregon</a> on Reddit.</p>
			</div>
			<div class="tablinks" id="obtainSaveIOS">
				<h1 id="obtainId">How to obtain your save file (iOS)</h1>
			</div>
			<div class="tablinks" id="obtainIOS">
				<h3>This only works on jailbroken iOS with a file manager such as Filza</h3>
				<ol>
					<li>Open up Filza and head to /private/&#8203;var/&#8203;mobile/&#8203;Containers/&#8203;Data/&#8203;Applications</li>
					<li>Look for the Clicker Heroes folder and navigate into it</li>
					<li>Next, open Library and under Path click the link, it'll open up a properties windows and click the parent folder and copy and paste it somewhere. (You'll need that info for later)</li>
					<li>In the Clicker Heroes folder, navigate to /Application Support/&#8203;com.playsaurus.clickerheroes/&#8203;Local Store/&#8203;#SharedObjects</li>
					<li>Look for ClickerHeroesAccountSO.sol . This is your save game.</li>
				</ol>
				<p>Credits to <a target="_blank" href="https://www.reddit.com/user/Delerowen">/u/Delerowen</a> on Reddit</p>
			</div>
			</div>
				<div id="tab2" class="tabcontent">
					<div class="tablinks">
						<h1 style="text-align:center">CLICKER HEROES MOBILE SAVE UPLOADER</h1>
					</div>
					<div class="tablinks" style="text-align:center;padding-top:2%;padding-bottom:2%">
						<input type="file" id="files" class="inputfile" name="file" />
						<label class="btncust btnlabel" for="files">Choose a file..</label>
						<button class="btn btncust" id="btn" data-clipboard-target="#encoded" style="display:none">
							Copy to clipboard
						</button>
					</div>
					<div class="tablinks" style="text-align:center;width:100%;display:none">
                        <h3>DECODED</h3>
						<textarea id="decoded" onclick="this.focus();this.select()" readonly style="height: 500px;width:90%;resize:none"></textarea>
					</div>
                    <div class="tablinks" style="text-align:center;width:100%">
                        <h3>ENCODED SAVE FILE TO USE WITH CALCULATORS AND LISTERS</h3>
						<textarea id="encoded" onclick="this.focus();this.select()" readonly style="height: 500px;width:90%;resize:none"></textarea>
					</div>
			</div>
			<div id="tab3" class="tabcontent">
				<div class="wrapper">
				<iframe id="kepowcalc" style="width:100%;height:175%;border:none;" src="https://jsfiddle.net/graceoflives/2b7am8Lg/show/"></iframe>
				</div>
				</div>
				<div id="tab4" class="tabcontent">
                <div class="wrapper">
                    <iframe id="clickerLister" style="width:100%;height:100%;border:none" src="http://alexbonjour.github.io/clicker-lister/"></iframe>    
                </div>
			</div>
			</div>
		</div>
	<script>
	$(document).ready(function(){
        const ANTI_CHEAT_CODE = 'Fe12NAfA3R6z4k0z';
        const SALT = 'af0ik392jrmt0nsfdghy0';
        const CHARACTERS = '1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM';
        
        $('ul.tabs').each(function(){
		  // For each set of tabs, we want to keep track of
		  // which tab is active and its associated content
		  var $active, $content, $links = $(this).find('a');

		  // If the location.hash matches one of the links, use that as the active tab.
		  // If no match is found, use the first link as the initial active tab.
		  $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
		  $active.addClass('active');

		  $content = $($active[0].hash);

		  // Hide the remaining content
		  $links.not($active).each(function () {
			$(this.hash).hide();
		  });

		  // Bind the click event handler
		  $(this).on('click', 'a', function(e){
			// Make the old tab inactive.
			$active.removeClass('active');
			$content.hide();

			// Update the variables with the new link and content
			$active = $(this);
			$content = $(this.hash);

			// Make the tab active.
			$active.addClass('active');
			$content.show();

			// Prevent the anchor's default click action
			e.preventDefault();
		  });
		});
		var btn = document.getElementById('btn');
		var clipboard = new Clipboard(btn);
		$(function() {
		$("#link1").trigger("click");
		});
		$('#files').change(function(evt){
			var files = evt.target.files;
			for (var i = 0, f; f = files[i]; i++)
			{
				var reader = new FileReader();
				reader.onload = (function(reader)
				{
					return function()
					{
						var contents = reader.result;
						var lines = contents.split('\n');
						var firstIndex = contents.indexOf('{"');
						var lastIndex = contents.lastIndexOf('}');
						var formattedContent = contents.substring(firstIndex,lastIndex+1);
						$('#decoded').val(formattedContent);
                        var base64content = btoa(formattedContent);
                        var result = sprinkle(base64content) + ANTI_CHEAT_CODE + getHash(base64content);
                        $('#encoded').val(result);
						$('.btn').show();
                        
					}
				})(reader);
				reader.readAsText(f);
				
			}
			
		})
        function getHash(string) {
            var charaters = string.split();
            charaters.sort();
            var sortedCharaters = charaters.join();
            return CryptoJS.MD5(sortedCharaters + SALT);
        }
        function sprinkle(string) {
            var characters;
            var randomIndex;
            var array = string.split("");
            var result = [];
            var counter = 0;
            while (counter < array.length) {
                result[counter * 2] = array[counter];
                characters = CHARACTERS;
                randomIndex = Math.floor(Math.random() * (characters.length - 1));
                result[counter * 2 + 1] = characters.substr(randomIndex, 1);
                counter++;
            }
            return result.join("");
        }
	});
</script>
    </body>
</html>
