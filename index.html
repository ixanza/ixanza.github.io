<html>
	<head>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">

	<script src="js/jquery-3.1.0.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/responsive.min.js"></script>
	</head>
	<body>
	<div id="header">
	<a target="_blank" href="http://www.clickerheroes.com">Clicker Heroes</a> |
	<a target="_blank" href="https://www.reddit.com/r/ClickerHeroes/">Reddit</a> | 
	<a target="_blank" href="https://www.facebook.com/Clicker-Heroes-696573203747255/">Facebook</a> | 
	<a target="_blank" href="https://twitter.com/clickerheroes">Twitter</a>
	</div>
	<div style="width:100%">
	<div style="width:80%;margin:0 auto;">
		<div>
		<h1 style="text-align:center">CLICKER HEROES MOBILE SAVE RETRIEVER</h1>
			<p>
			This tool lets you upload your Clicker Heroes save file from Android (iOS coming soon) and removes the header and footer of the file to make it compatible with a save file encoder which can then be used for <a target="_blank" href="https://www.reddit.com/r/ClickerHeroes/wiki/calculators">calculators</a> as well as displaying your progress from <a target="_blank" href="http://alexbonjour.github.io/clicker-lister/">Clicker Lister</a>. 
			</p>
		</div>
		<div id="obtainSave">
			<h1 id="obtainId">How to obtain your save file (Android)</h1>
		</div>
		<div id="obtain">
			<h3>Method 1 (Rooted)</h3>
			<ol>
			<li>Make sure you are using a root file browser such as <a target="_blank" href="https://play.google.com/store/apps/details?id=com.estrongs.android.pop&hl=en">ES File Explorer</a> or <a target="_blank" href="https://play.google.com/store/apps/details?id=com.jrummy.root.browserfree&hl=en">Root Browser</a></li>
			<li>Navigate to /data/data/air.com.r2gamesusa.clickerheroes/com.r2gamesusa.clickerheroes/Local Store/#SharedObjects</li>
			<li>Copy ClickerHeroesAccountSO.sol to your sdcard</li>
			<li>Browse for the copied file below</li>
			</ol>
			<h3>Method 2 (Unrooted)</h3>
			<p>Refer to <a target="_blank" href="https://docs.google.com/document/d/1E_5rw2SF_LP6zrroWvGdPe5ZpBmudp0j5lU8M-Kp7Fg/edit">this guide</a> created by <a target="_blank" href="https://www.reddit.com/user/PlainBillOregon"> u/PlainBillOregon</a> on Reddit.</p>
		</div>
		<div id="encodingSave">
			<h1 id="encodeId">Encoding the save file</h1>
		</div>
		<div id="encoding">
			<p>Unfortunately as I do not have access to the encoding process, we will be using another website to handle the encoding of the save file</p>
			<ol>
			<li>Copy the file below by either clicking "Copy to clipboard" or by highlighting the entire text and copying it.</li>
			<li>Head over to <a target="_blank" href="https://www.itshax.com/Clicker-Heroes/pro-mode#page-0"> ItsHax Clicker Heroes Save Game Editor</a></li>
			<li>Hit next until you are at page 3</li>
			<li>Paste the contents of your save file into the Decoded box</li>
			<li>The encoded save file should appear in the Encoded box</li>
			<li>Copy the encoded save file</li>
			<li>You can now use this on any <a target="_blank" href="https://www.reddit.com/r/ClickerHeroes/wiki/calculators">calculators</a> or <a target="_blank" href="http://alexbonjour.github.io/clicker-lister/">listers</a></li>
			</ol>
		</div>
		<div style="text-align:center;padding-top:2%;padding-bottom:2%">
			<input type="file" id="files" name="file" /><br/><br/>
			<button class="btn" id="btn" data-clipboard-target="#decoded" style="display:none">
			Copy to clipboard
			</button>
		</div>
		<div style="text-align:center;width:100%">
			<textarea id="decoded" style="height: 500px;width:100%"></textarea>
		</div>
		</div>
	</div>
	</body>
<script>
	$(document).ready(function(){
	var btn = document.getElementById('btn');
    var clipboard = new Clipboard(btn);
	$('#obtainSave').click(function(){
		if($('#obtain').is(":visible")==true){
			$('#obtain').fadeOut();
		}
		else{
		$('#obtain').fadeIn();
		}
	})
	$('#encodingSave').click(function(){
		if($('#encoding').is(":visible")==true){
			$('#encoding').fadeOut();
		}
		else{
		$('#encoding').fadeIn();
		}
	})
		$('#files').change(function(evt){
			var files = evt.target.files;
			for (var i = 0, f; f = files[i]; i++)
			{
				var reader = new FileReader();
				reader.onload = (function(reader)
				{
					return function()
					{
						var contents = reader.result;
						var lines = contents.split('\n');
						var firstIndex = contents.indexOf('{');
						var lastIndex = contents.lastIndexOf('}');
						var formattedContent = contents.substring(firstIndex,lastIndex+1);
						$('#decoded').val(formattedContent);
						$('.btn').show();
					}
				})(reader);
				reader.readAsText(f);
			}
		})
	});
</script>
</html>